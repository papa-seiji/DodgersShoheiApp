本アプリは個人開発プロジェクトとして設計・実装・運用を行っています。

🚀DodgersShoheiApp リリースノート
本アプリは、MLBの試合情報、大谷翔平の個人成績、6地区30球団の順位表、チャット機能、画像投稿機能、訪問者数の記録などを統合したWebアプリケーションです。Spring Boot (Java) をバックエンドに、PostgreSQLをデータベースに使用し、フロントエンドはHTML/CSS/JavaScriptで構築されています。
また、SSL証明書を取得し、独自ドメインで運用しています。
現在は https://letsgoohtanifromjapan.click で本番運用中で、
https://letsgoohtanifromjapan.com への移行および CloudFront 導入を進めています。


【インフラ・運用面】
🌐 ドメイン運用
本アプリは Route53 により独自ドメインを管理しています。
現在は .click ドメインで運用中で、.com ドメインへの移行および CloudFront 導入を進めています。

☁️ CDN（CloudFront）
パフォーマンス改善および通信コスト削減のため、
AWS CloudFront を利用した CDN 構成への移行を予定しています。
JavaScript による UI 制御（Tab切り替え、tooltip 等）についても、
CDN キャッシュの恩恵を受けられる構成を想定しています。


⚠️ キャッシュ設計
WebSocket通信および動的APIについてはキャッシュ対象外とし、
静的リソースのみ CDN キャッシュを適用する設計としています。

🔐 セキュリティ設計
Spring Security を利用し、エンドポイント単位でアクセス制御を実装。
管理者専用機能やセッション管理、ログ記録を含めたセキュリティ設計を行っています。

🗂 メディアファイル管理（Amazon S3）
画像（img）、動画（mp4）、音声（mp3）などのメディアファイルは、
Amazon S3 バケットに保存し、アプリケーションから参照する構成としています。

・画像：Proud画面の投稿画像、アーカイブ用画像
・動画（mp4）：イベント・演出用コンテンツ
・音声（mp3）：BGM・効果音

アプリケーションサーバー（EC2）にはメディアファイルを直接保持せず、
静的コンテンツは S3 を利用することで、可用性・拡張性を考慮した設計としています。

これらの S3 上の静的コンテンツについては、
将来的に CloudFront を経由して配信することで、
表示速度の向上および通信コスト削減を図る予定です。


【【📌実装済みの主な機能】】
📝 認証 & 記録
ユーザー認証：Spring Securityを利用したログイン・ログアウト機能
ログイン・ログアウト記録：login_logout_logs テーブルに記録（1日1回 8時にバッチ処理で保存＆ログファイルに出力）

🔢 翔平通算ホームラン/ピッチャー通算勝利数 リアルタイムカウンター機能
WebSocket を利用したリアルタイムカウンターを実装。
登録アカウントにadmin権限を付与されたユーザのみ↑↓ボタンが表示される仕様にしている、（adminの付与は管理人がusersTBに対して手動で付与する）
このユーザのみが数値を操作でき、全ユーザーに即時反映されます。
カウンター値はデータベース（counters）に保存され、再起動後も保持されます。

📊 #MLB関連機能
MLB試合情報の取得・表示
API経由で当日の試合情報（球場、スコア、試合状況）を取得し表示
試合状況の表示
In Progress（進行中） / Final（終了） / 試合なし
チームロゴ表示：APIから取得したチーム名を元にロゴを表示
大谷翔平の個人成績の表示
試合ごとの成績（打率・本塁打・OPS など）をAPI経由で取得し表示
MLB順位表の表示
6地区30球団の順位データをAPIから取得し、チームロゴ付きで表示

🧩 スタメン／予告先発表示（lineup-grid）
試合当日のスターティングラインナップおよび予告先発投手を表示する専用ページを実装。
MLB API から取得したデータをもとに、左右2カラム構成（Away / Home）で視覚的に表示します。

・スタメン未確定時は「未確定」表示
・日本人選手は強調表示
・試合日時・球場情報を併記
・Home画面から遷移、または埋め込み表示を想定した設計


💬 チャット機能
リアルタイムチャット（WebSocket）
投稿したコメントが即座に全ユーザーに反映される
基本的な機能
ユーザー名付きで投稿可能

🏆 Proud画面（画像投稿）
画像アップロード & 表示
投稿画像を proud_images テーブルに保存し、Proudページに表示
投稿機能
コメント付き画像投稿、一覧表示

いいね機能
画像に対して「いいね」ができ、ユーザーごとに記録・反映

📰 ニュース更新機能
管理者専用ニュース更新画面
news_updates テーブルにニュースを保存
記事タイトル・本文・画像をアップロード可能
管理者のみアクセス可能なインターフェースを実装

📈 訪問者数の記録
訪問者数カウント機能
visitor_counters テーブルに訪問者数を保存・表示
管理者のみ 訪問者数を閲覧可能

📊 MLB順位予想機能
ユーザー参加型の順位予想機能を実装。
各ユーザーは1チームに投票でき、投票結果はリアルタイムで集計・可視化されます。
投票内容はデータベース（mlb_yosou_datas）に保存され、再投票（変更）にも対応しています。

🆚 選手成績比較機能
MLB Stats API を利用し、選手同士の成績比較ページを実装。
大谷翔平とアーロン・ジャッジをはじめ、複数選手の打撃・投手成績を比較表示できます。

🗂 アーカイブ機能
過去の試合やイベントに関する画像・動画コンテンツをまとめて閲覧できるアーカイブページを実装。
(現在実装中は、2025年MLB東京開幕戦Cubs vs Dodgersのコンテンツをアーカイブ中)

🌏 国際大会コンテンツ（WBC）
World Baseball Classic（WBC）関連の専用ページを実装。
大会情報やビジュアル演出を含めたコンテンツを提供しています。


🔔 通知 & バッチ処理
APIのヘルスチェック
1日1回 23時 にAPIの稼働状況をログに記録
訪問者数ログのリセット
1日1回 8時 に訪問者数をリセットし、ログに記録

🎨 UI / UX 改善
ハンバーガーメニュー
オーバーレイ機能（背景を暗くし、クリックで閉じる）
スムーズなアニメーション（開閉時のフェードイン・フェードアウト）
スクロールロック（メニュー展開中はページスクロール無効）
アクセシビリティ対応（aria-expanded の設定、キーボード操作対応）
YouTube動画埋め込み
ホーム画面 に YouTube の埋め込みを追加し、動画コンテンツを提供
🎬 動画コンテンツ（mp4）
イベント用・演出用の動画コンテンツ（mp4）をアプリ内で再生可能。
イントロ演出や特定ページでの再生を想定し、HTML5 video タグを利用した実装を行っています。
🎵 BGM / 効果音（mp3）
ページ演出用のBGMや効果音（mp3）を再生可能。
iOS Safari の制限を考慮し、ユーザー操作をトリガーとした再生制御を実装しています。
動画・音声コンテンツは HTML5（video / audio）を利用して再生し、
ブラウザやデバイス制限（特に iOS Safari）を考慮した実装としています。

📅 年度別表示切り替え（Tab UI）
年度ごとにデータを切り替えて表示できる Tab UI を実装。
JavaScript によりページ遷移なしで表示内容を切り替え、
複数年の成績や情報をスムーズに比較できる設計としています。
📅 年度別表示切り替え（Tab UI）
年度ごとにデータを切り替えて表示できる Tab UI を実装。
JavaScript によりページ遷移なしで表示内容を切り替え、
複数年の成績や情報をスムーズに比較できる設計としています。


🛠️ 使用技術
バックエンド：Spring Boot 3.3.5 (Java)
データベース：PostgreSQL
フロントエンド：HTML / CSS / JavaScript
リアルタイム通信：WebSocket
認証：Spring Security + BCrypt
API連携：MLB API
ファイル管理：Thymeleaf（テンプレートエンジン）
デプロイ環境：AWS EC2 + Nginx + Let's Encrypt（SSL証明書取得済み）
開発ツール：VSCode, Postman
📌 バージョン管理
本アプリのソースコードは GitHub で管理しており、ブランチ運用を行いながら開発を進めています。
リリース時の履歴管理やコードのレビューもGitHub上で実施しています。

🗄️ 運用中のデータベーステーブル
本アプリでは、以下のPostgreSQLのテーブルを運用中です。

users：ユーザー情報（ID、名前、パスワード、権限 など）
comments：チャットの投稿データ（ユーザー、メッセージ、タイムスタンプ）
counters：カウンター機能の管理（管理者用の数値更新機能）
liked_users：Proudページの「いいね」機能の記録（ユーザーID、画像ID）
login_logout_logs：ログイン・ログアウトの記録（ユーザー、日時、操作内容）
mlb_api_logs：MLB APIのデータ取得ログ
mlb_yosou_datas：MLB順位予想の記録
news_updates：ニュース記事データ（タイトル、本文、画像パス など）
proud_image：Proudページの画像投稿データ
subscriptions：Webプッシュ通知のサブスクリプション情報（現在は未使用）
visitor_counter：訪問者数の記録
