<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>hogehoge_02</title>
  <link rel="stylesheet" href="/css/hogehoge_01.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script th:inline="javascript">
  window.MONTH_GAMES = /*[[${monthGames}]]*/ [];
</script>
<script src="/js/hogehoge_02.js"></script>

<style>
/* ===== Layout ===== */
.month-detail-wrapper {
  max-width: 720px;
  margin: 0 auto;
  padding: 24px 16px 40px;
}

.month-title {
  text-align: center;
  font-size: 22px;
  margin-bottom: 20px;
  letter-spacing: 1px;
}

/* ===== Scorebook Table ===== */
.scorebook-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
  background: #fffdf6;
  box-shadow: 0 6px 16px rgba(0,0,0,0.08);
  margin-bottom: 32px;
}

.scorebook-table thead {
  background: #2f2f2f;
  color: #fff;
}

.scorebook-table th,
.scorebook-table td {
  padding: 10px 8px;
  border-bottom: 1px solid #ddd;
  text-align: center;
}

.scorebook-table tbody tr:hover {
  background: #f7f3e8;
}

/* 勝敗 */
.win { color: #c62828; font-weight: bold; }
.lose { color: #1565c0; font-weight: bold; }

/* 調子 */
.form-s { color: #d32f2f; font-weight: bold; }
.form-a { color: #ef6c00; font-weight: bold; }
.form-b { color: #fbc02d; }
.form-c { color: #546e7a; }

/* ===== 試合詳細カード ===== */
.game-card {
  background: #ffffff;
  border: 1px solid #ddd;
  border-radius: 10px;
  padding: 16px;
  margin-bottom: 32px;
}

.game-header {
  display: flex;
  justify-content: space-between;
  font-weight: bold;
  font-size: 15px;
  margin-bottom: 8px;
}

.batting-summary {
  margin: 10px 0 12px;
  font-weight: bold;
}

.atbat-list {
  padding-left: 18px;
  margin-bottom: 12px;
}

.atbat-list li {
  margin-bottom: 4px;
  font-size: 14px;
}

.bat-result {
  margin-left: 6px;
  font-weight: bold;
}

/* ===== Images ===== */
.game-images {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.game-images img {
  width: 100%;
  max-width: 160px;
  border-radius: 6px;
  object-fit: cover;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

/* ===== Comment ===== */
.game-comment {
  background: #f7f7f7;
  padding: 12px;
  border-radius: 6px;
  margin-top: 12px;
}

.game-comment pre {
  margin: 0;
  white-space: pre-wrap;
  font-family: inherit;
  font-size: 14px;
}

/* 戻る */
.back-link {
  display: inline-block;
  margin-top: 24px;
  text-decoration: none;
  font-weight: bold;
  color: #3366cc;
}

/* =====================================================
   ★ MLB風 ラインスコア（完全再現）
===================================================== */

.linescore-table {
  width: 100%;
  border-collapse: collapse;
  margin: 12px 0 16px;
  background: #000;
  color: #eee;
  font-size: 13px;
  font-family: "Arial Narrow", "Segoe UI", sans-serif;
  box-shadow: inset 0 0 0 1px #222;
}

.linescore-table th,
.linescore-table td {
  border: 1px solid #222;
  padding: 6px;
  text-align: center;
  min-width: 26px;
}

/* ヘッダ */
.linescore-table thead th {
  background: #111;
  color: #aaa;
  font-size: 12px;
  font-weight: normal;
}

/* TEAM列 */
.linescore-table th:first-child,
.linescore-table td:first-child {
  min-width: 52px;
  font-weight: bold;
  color: #ddd;
}

/* Away イニング */
.linescore-table tbody tr:first-child td:not(:first-child):not(:nth-last-child(-n+3)) {
  color: #ff9800;
  font-weight: bold;
}

/* Home イニング */
.linescore-table tbody tr:last-child td:not(:first-child):not(:nth-last-child(-n+3)) {
  color: #fdd835;
  font-weight: bold;
}

/* R H E */
.linescore-table td:nth-last-child(3),
.linescore-table td:nth-last-child(2),
.linescore-table td:nth-last-child(1) {
  background: #0b0b0b;
  color: #fff;
  font-weight: bold;
}

/* 勝利チーム R */
.linescore-table tr:last-child td:nth-last-child(3) {
  color: #ff5252;
}

/* チーム名 */
.linescore-table tr:first-child td:first-child {
  color: #b0bec5;
}
.linescore-table tr:last-child td:first-child {
  color: #64b5f6;
}

/* Mobile */
@media (max-width: 480px) {
  .linescore-table {
    font-size: 11px;
  }
  .linescore-table th,
  .linescore-table td {
    padding: 4px;
  }
}

/* モバイル調整 */
@media (max-width: 480px) {
  .linescore-table {
    font-size: 11px;
  }

  .linescore-table th,
  .linescore-table td {
    padding: 4px 4px;
  }
}

</style>
</head>

<body>

<h1>
  <span th:text="${month}">4</span>月の詳細ページ
</h1>
<p id="info"></p>

  <a href="/hogehoge_01" class="back-link">
    ← シーズン概要に戻る
  </a>


<div class="month-detail-wrapper">

<!-- ===== 4月 成績推移グラフ ===== -->
<div style="max-width:720px;margin:0 auto 32px;">
  <canvas id="aprilChart" height="120"></canvas>
</div>


  <h2 class="month-title">
    <span th:text="${month}">4</span>月 試合一覧
  </h2>

  <!-- ===== 月間一覧テーブル ===== -->
  <table class="scorebook-table">
    <thead>
      <tr>
        <th>Date</th>
        <th>Opponent</th>
        <th>Result</th>
        <th>Form</th>
      </tr>
    </thead>
    <tbody>
    <tr th:each="g : ${monthGames}">

        <td>
        <a th:href="@{/hogehoge_02(month=${month}, date=${g.date})}"
            th:text="${g.date}">
            04/27
        </a>
        </td>
        <td>vs DUMMY</td>
        <td class="win" th:text="${g.result}">○ 5-3</td>
            <td th:text="
                ${g.value == 5 ? 'S' :
                g.value == 4 ? 'A' :
                g.value == 3 ? 'B' :
                g.value == 2 ? 'C' :
                g.value == 1 ? 'D' : '-'}
            ">
            </td>

    </tr>
    </tbody>
  </table>


<a th:if="${singleView}"
   th:href="@{/hogehoge_02(month=${month})}"
   class="back-link">
  ← 4月一覧に戻る
</a>

  <!-- ===== ★ 試合詳細カード（ここも games を回す） ===== -->
  <div class="game-card" th:each="g : ${games}">


    <div class="game-header">
      <span th:text="${g.date} + ' vs DUMMY'">4/12 vs DUMMY</span>
      <span class="win" th:text="${g.result}">○ 5-3</span>
    </div>
        <span class="form-badge">
        <span th:switch="${g.value}">
            <span th:case="2">S</span>
            <span th:case="1">A</span>
            <span th:case="0">B</span>
            <span th:case="-1">C</span>
            <span th:case="*">-</span>
        </span>
        </span>


    <!-- ===== MLB LINE SCORE ===== -->
<table class="linescore-table">
  <thead>
    <tr>
      <th>TEAM</th>
      <th>R</th>
      <th>H</th>
      <th>E</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>KC</td>
      <td th:text="${g.score['awayR']}">3</td>
      <td th:text="${g.score['awayH']}">6</td>
      <td th:text="${g.score['awayE']}">1</td>
    </tr>
    <tr>
      <td>LAD</td>
      <td th:text="${g.score['homeR']}">5</td>
      <td th:text="${g.score['homeH']}">8</td>
      <td th:text="${g.score['homeE']}">0</td>
    </tr>
  </tbody>
</table>

    <!-- ===== 打撃サマリー ===== -->
    <div class="batting-summary" th:text="${g.summary}">
      5打数 / 2安打
    </div>

    <!-- ===== 打席内容 ===== -->
    <ul class="atbat-list">
      <li th:each="bat : ${g.atBats}">
        <strong th:text="'第' + ${bat.no} + '打席'">第1打席</strong>
        ：対戦投手
        <span th:text="${bat.pitcher}">投手名</span>
        （<span th:text="${bat.hand}">右</span>）
        <span class="bat-result" th:text="${bat.result}">結果</span>
      </li>
    </ul>

    <!-- ===== IMAGE GALLERY ===== -->
    <div class="game-images">
      <img src="https://dodgersshoheiapp-assets.s3.us-east-1.amazonaws.com/img/SOZAI/%E6%8F%BA%E3%82%8C%E3%82%B9%E3%82%A4%E3%83%B3%E3%82%B0%E7%BF%94%E5%B9%B3.png" alt="highlight">
      <img src="https://dodgersshoheiapp-assets.s3.us-east-1.amazonaws.com/img/SOZAI/%E6%8F%BA%E3%82%8C%E3%82%B9%E3%82%A4%E3%83%B3%E3%82%B0%E7%BF%94%E5%B9%B3.png" alt="highlight">
    </div>

    <!-- ===== コメント ===== -->
    <div class="game-comment">
      <strong>コメント：</strong>
      <pre th:text="${g.comment}"></pre>
    </div>

  </div>


</div>

<script>
  const params = new URLSearchParams(location.search);
  const month = params.get("month");
  document.getElementById("info").textContent =
    month ? month + "月の詳細ページ（ダミー）" : "月未指定";
</script>

<script th:inline="javascript">
/*<![CDATA[*/
  const APRIL_LABELS = [[${chartLabels}]];
  const APRIL_VALUES = [[${chartValues}]];
/*]]>*/
</script>

</body>
</html>
